<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>City Explorer - Project Report</title>
    <style>
        @media print {
            body { margin: 0; }
            .page-break { page-break-before: always; }
        }
        
        body {
            font-family: 'Times New Roman', Times, serif;
            font-size: 12pt;
            line-height: 1.6;
            max-width: 8.5in;
            margin: 0 auto;
            padding: 1in;
            background: white;
            color: #000;
        }
        
        h1 {
            font-size: 24pt;
            text-align: center;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        h2 {
            font-size: 14pt;
            font-weight: bold;
            margin-top: 24pt;
            margin-bottom: 12pt;
            border-bottom: 1px solid #000;
            padding-bottom: 4px;
        }
        
        h3 {
            font-size: 12pt;
            font-weight: bold;
            margin-top: 18pt;
            margin-bottom: 8pt;
        }
        
        p {
            text-align: justify;
            margin-bottom: 12pt;
        }
        
        .title-page {
            text-align: center;
            padding-top: 2in;
        }
        
        .title-page h1 {
            font-size: 28pt;
            margin-bottom: 30px;
        }
        
        .title-page .subtitle {
            font-size: 16pt;
            margin-bottom: 60px;
        }
        
        .title-page .info {
            font-size: 14pt;
            margin-bottom: 15px;
        }
        
        .title-page .date {
            margin-top: 80px;
            font-size: 12pt;
        }
        
        ul, ol {
            margin-bottom: 12pt;
            padding-left: 30pt;
        }
        
        li {
            margin-bottom: 6pt;
        }
        
        .code {
            font-family: 'Courier New', monospace;
            background: #f5f5f5;
            padding: 2px 6px;
            font-size: 10pt;
        }
        
        .code-block {
            font-family: 'Courier New', monospace;
            background: #f5f5f5;
            padding: 12px;
            margin: 12pt 0;
            font-size: 10pt;
            border: 1px solid #ddd;
            overflow-x: auto;
            white-space: pre-wrap;
        }
        
        .screenshot-placeholder {
            border: 2px dashed #999;
            padding: 60px 20px;
            text-align: center;
            margin: 20px 0;
            background: #fafafa;
            color: #666;
            font-style: italic;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 12pt 0;
        }
        
        th, td {
            border: 1px solid #000;
            padding: 8px 12px;
            text-align: left;
        }
        
        th {
            background: #f0f0f0;
            font-weight: bold;
        }
        
        .center {
            text-align: center;
        }
        
        .bold {
            font-weight: bold;
        }
    </style>
</head>
<body>

<!-- Title Page -->
<div class="title-page">
    <h1>City Explorer</h1>
    <div class="subtitle">A Client-Server Application for City Information</div>
    
    <div class="info"><strong>Module:</strong> Service-Oriented Computing (IT41073)</div>
    <div class="info"><strong>Assignment:</strong> Mini Project</div>
    
    <div style="margin-top: 80px;">
        <div class="info"><strong>Name:</strong> Chamod Ravishanka</div>
        <div class="info"><strong>Student ID:</strong> [Your Student ID]</div>
    </div>
    
    <div class="date">December 2025</div>
</div>

<div class="page-break"></div>

<!-- Section 1: Introduction -->
<h2>1. Introduction</h2>

<p>City Explorer is a web application I built to help users find information about cities around the world. The idea came from wanting to create something practical that combines multiple data sources into one easy-to-use interface. When you search for a city, you get weather data, country details, and geographic information all in one place instead of having to visit different websites.</p>

<p>The application follows a client-server model. The frontend is a simple website built with HTML, CSS, and JavaScript. The backend runs on Node.js with Express handling the server logic. For storing search history, I used MongoDB. The whole thing connects to three external APIs to pull in the actual city data.</p>

<p>What makes this project interesting from a service-oriented perspective is how it aggregates data from multiple sources. The GeoDB Cities API provides the basic city search functionality. OpenWeatherMap gives us current weather conditions. RestCountries fills in details about the country like population, currency, and languages. On the security side, I implemented Google OAuth for user login and API key validation for protecting the endpoints.</p>

<h2>2. System Architecture</h2>

<p>I designed the system with clear separation between the client and server components. Here's a diagram showing how everything connects:</p>

<div class="screenshot-placeholder">
    [INSERT ARCHITECTURE DIAGRAM SCREENSHOT HERE]
</div>

<p>The frontend is purely static files - HTML for structure, CSS for styling, and JavaScript for making API calls. When a user searches for a city, the JavaScript code sends a fetch request to our Express server. The server then makes the actual calls to the external APIs, processes the responses, and sends back a combined result.</p>

<p>I chose this approach rather than calling the external APIs directly from the browser for a couple reasons. First, it keeps our API keys secure on the server. Second, it lets us combine data from multiple sources before sending it to the user. Third, we can add caching or rate limiting at the server level if needed.</p>

<p>MongoDB stores the search records. Each record includes the city name, what country it's in, the weather at the time of search, and when the search happened. Users can view their history and delete old records.</p>

<h2>3. External APIs</h2>

<h3>GeoDB Cities API</h3>

<p>This is the main API for city searches. It's available through RapidAPI and returns detailed information about cities worldwide. When you search for "London" for example, it gives you coordinates, population, region, and the country code. I use the country code to then fetch additional details from RestCountries.</p>

<p>The endpoint I'm using is:</p>
<div class="code-block">GET https://wft-geo-db.p.rapidapi.com/v1/geo/cities?namePrefix={cityName}</div>

<p>One thing to note is there's a rate limit on the free tier, so I had to be careful about not making too many requests during testing.</p>

<h3>OpenWeatherMap API</h3>

<p>For weather data, OpenWeatherMap is pretty much the standard. Their free tier is generous enough for a project like this. I pass in the city coordinates from GeoDB and get back current temperature, humidity, wind speed, and a description of conditions.</p>

<div class="code-block">GET https://api.openweathermap.org/data/2.5/weather?lat={lat}&lon={lon}&appid={key}&units=metric</div>

<p>The units=metric parameter means temperatures come back in Celsius, which is what most people expect.</p>

<h3>RestCountries API</h3>

<p>This one doesn't require authentication, which is nice. I use it to get country-level information like the flag, capital city, population, currencies they use, and what languages are spoken. It fills in the context around the city data.</p>

<div class="code-block">GET https://restcountries.com/v3.1/alpha/{countryCode}</div>

<h2>4. Security Implementation</h2>

<h3>OAuth 2.0 with Google</h3>

<p>For user authentication, I went with Google OAuth through Passport.js. It's what users expect these days - click "Sign in with Google" and you're done. No need to create yet another account and password.</p>

<p>The flow works like this: user clicks login, gets redirected to Google, approves access, Google sends them back to our callback URL with an authorization code, Passport exchanges that for user info, and we create a session. The session is stored server-side and the user gets a cookie to maintain their logged-in state.</p>

<p>Here's the basic Passport setup:</p>

<div class="code-block">passport.use(new GoogleStrategy({
    clientID: process.env.GOOGLE_CLIENT_ID,
    clientSecret: process.env.GOOGLE_CLIENT_SECRET,
    callbackURL: '/auth/google/callback'
}, (accessToken, refreshToken, profile, done) => {
    return done(null, profile);
}));</div>

<h3>API Key Validation</h3>

<p>Besides OAuth, I also implemented API key validation for the backend endpoints. This is the kind of security you'd use for server-to-server communication or if you wanted to let other developers build on top of your API.</p>

<p>Every request to protected endpoints needs an x-api-key header. The middleware checks if it matches our stored key before letting the request through:</p>

<div class="code-block">const validateApiKey = (req, res, next) => {
    const apiKey = req.headers['x-api-key'];
    if (apiKey && apiKey === process.env.API_KEY) {
        next();
    } else {
        res.status(401).json({ error: 'Invalid API key' });
    }
};</div>

<p>This gives us two layers of security - user-level auth through Google and application-level auth through API keys.</p>

<h2>5. Application Screenshots</h2>

<h3>Main Search Interface</h3>

<div class="screenshot-placeholder">
    [INSERT SCREENSHOT OF HOME PAGE WITH SEARCH]
</div>

<p>The home page has a clean design with a search bar at the top. Users can type in any city name and hit search. The results show up below with all the aggregated information.</p>

<h3>City Search Results</h3>

<div class="screenshot-placeholder">
    [INSERT SCREENSHOT OF SEARCH RESULTS]
</div>

<p>When you search for a city, you see a card with the city name, country flag, current weather with an icon, temperature, and other details. There's a save button to add it to your history.</p>

<h3>Search History</h3>

<div class="screenshot-placeholder">
    [INSERT SCREENSHOT OF RECORDS/HISTORY PAGE]
</div>

<p>The records page shows all saved searches. Each entry has a delete button. This data is stored in MongoDB and persists between sessions.</p>

<h2>6. Technical Challenges</h2>

<p>The trickiest part was coordinating the multiple API calls. When someone searches for a city, I need to first hit GeoDB, then use those results to call both OpenWeatherMap and RestCountries. I used Promise.all to run the weather and country requests in parallel since they don't depend on each other:</p>

<div class="code-block">const [weatherData, countryData] = await Promise.all([
    fetchWeather(lat, lon),
    fetchCountry(countryCode)
]);</div>

<p>Error handling was another challenge. What if GeoDB returns results but the weather API is down? I had to make sure the app degrades gracefully and still shows whatever data is available.</p>

<p>CORS was also something I had to deal with. The browser blocks cross-origin requests by default, so I added the cors middleware to Express with appropriate configuration.</p>

<h2>7. Conclusion</h2>

<p>Building City Explorer taught me a lot about how modern web services work together. The project demonstrates key SOC concepts: consuming external APIs, implementing authentication standards like OAuth, securing endpoints with API keys, and aggregating data from multiple sources into a unified interface.</p>

<p>If I had more time, I'd add features like caching API responses to reduce external calls, user preferences for temperature units, and maybe a favorites system separate from the search history. Overall though, the application works well and shows how service-oriented architecture enables building useful applications by combining existing services.</p>

<h2>8. References</h2>

<ul>
    <li>GeoDB Cities API - RapidAPI Documentation</li>
    <li>OpenWeatherMap API Documentation</li>
    <li>RestCountries API Documentation</li>
    <li>Passport.js Google OAuth Strategy Guide</li>
    <li>Express.js Official Documentation</li>
    <li>MongoDB Node.js Driver Documentation</li>
</ul>

</body>
</html>
